postgresql:
  fullnameOverride: "postgres"
  global:
    postgresql:
      auth:
        username: postgres      # Superadmin user
        existingSecret: postgres-secret
        secretKeys:
          adminPasswordKey: postgres-password

  # --- Resource Management ---
  architecture: standalone      # Single node to save resources

  primary:
    persistence:
      size: 2Gi
    resources:
      requests:
        cpu: 100m
        memory: 256Mi

    startupProbe:
      enabled: true
      initialDelaySeconds: 10
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 30
      successThreshold: 1

    livenessProbe:
      enabled: true
      initialDelaySeconds: 10
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 5
      successThreshold: 1

    readinessProbe:
      enabled: true
      initialDelaySeconds: 10
      periodSeconds: 10
      timeoutSeconds: 5
      failureThreshold: 5
      successThreshold: 1

    # --- INITIALIZATION SCRIPT ---
    initdb:
      scripts:
        init_logic.sql: |
          -- DB Creation
          CREATE DATABASE feed_db;
          CREATE DATABASE user_db;
          CREATE DATABASE post_db;
          CREATE DATABASE notification_db;
          CREATE DATABASE social_db;
